description: Google dorking using advanced search operators. IE https://www.stationx.net/google-dorks-cheat-sheet/

functions:
  http_get:
    description: Perform an HTTP GET request to Google dork using Google Custom Search API.
    parameters:
      user_agent:
        type: string
        required: false
        description: An optional, NON EMPTY User-Agent string to use for the request.
        examples:
          - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36"
          - "curl/7.86.0"
          - "robopages"
      cx:
        type: string
        description: Before using the Custom Search JSON API you will first need to create and configure your Programmable Search Engine. - https://developers.google.com/custom-search/v1/overview#search_engine_id.
        examples:
          - TODO

    container:
      image: library/alpine
      args:
        - --net=host
        - sh -c "apk add --no-cache curl jq && sh"

    cmdline:
      - curl
      - -s
      - -L
      - -A
      - "${user_agent or robopages}"
      - "https://www.googleapis.com/customsearch/v1?key="
      - ${env.GOOGLE_CUSTOM_SEARCH_API_KEY}
      - "&cx="
      - ${cx}
      - "&q="
      - ${query}

QUERY=$(echo "site:github.com security tools -virus filetype:pdf" | jq -sRr @uri)

curl "https://www.googleapis.com/customsearch/v1?key=${API_KEY}&cx=${CX}&q=${QUERY}"